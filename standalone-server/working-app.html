<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IV RELIFE Nexus - Working Application</title>
    
    <!-- External Dependencies -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/react-router-dom@6/dist/umd/react-router-dom.production.min.js"></script>
    <script src="https://unpkg.com/lucide-react@0.263.1/dist/umd/lucide-react.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        border: "hsl(220, 13%, 91%)",
                        input: "hsl(220, 13%, 91%)",
                        ring: "hsl(213, 94%, 48%)",
                        background: "hsl(0, 0%, 100%)",
                        foreground: "hsl(215, 25%, 15%)",
                        primary: {
                            DEFAULT: "hsl(213, 94%, 48%)",
                            foreground: "hsl(0, 0%, 98%)",
                        },
                        secondary: {
                            DEFAULT: "hsl(220, 14%, 96%)",
                            foreground: "hsl(215, 25%, 15%)",
                        },
                        destructive: {
                            DEFAULT: "hsl(0, 84%, 60%)",
                            foreground: "hsl(0, 0%, 98%)",
                        },
                        muted: {
                            DEFAULT: "hsl(220, 14%, 96%)",
                            foreground: "hsl(220, 9%, 46%)",
                        },
                        accent: {
                            DEFAULT: "hsl(220, 14%, 96%)",
                            foreground: "hsl(215, 25%, 15%)",
                        },
                        popover: {
                            DEFAULT: "hsl(0, 0%, 100%)",
                            foreground: "hsl(215, 25%, 15%)",
                        },
                        card: {
                            DEFAULT: "hsl(0, 0%, 100%)",
                            foreground: "hsl(215, 25%, 15%)",
                        },
                    },
                    boxShadow: {
                        elegant: "0 4px 20px -2px hsl(213 94% 48% / 0.25)",
                        card: "0 2px 8px -2px hsl(220 9% 46% / 0.15)",
                        navbar: "0 2px 16px -4px hsl(220 9% 46% / 0.2)",
                    },
                    backgroundImage: {
                        'gradient-primary': 'linear-gradient(135deg, hsl(213 94% 48%), hsl(213 94% 58%))',
                        'gradient-hero': 'linear-gradient(135deg, hsl(213 94% 48%) 0%, hsl(220 9% 20%) 100%)',
                    },
                    animation: {
                        "fade-in": "fadeIn 0.5s ease-in-out",
                    },
                    keyframes: {
                        fadeIn: {
                            "0%": { opacity: "0", transform: "translateY(10px)" },
                            "100%": { opacity: "1", transform: "translateY(0)" },
                        },
                    },
                }
            }
        }
    </script>
    
    <style>
        .transition-smooth { transition: all 0.3s ease; }
        .gradient-primary { background: linear-gradient(135deg, hsl(213, 94%, 48%), hsl(213, 94%, 58%)); }
        .loading-spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid hsl(213, 94%, 48%);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 2s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 3px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #a1a1a1;
        }

        /* Button variants - simplified without CVA */
        .btn-default {
            background: hsl(213, 94%, 48%);
            color: hsl(0, 0%, 98%);
        }
        .btn-default:hover {
            background: hsl(213, 94%, 42%);
        }
        .btn-outline {
            border: 1px solid hsl(220, 13%, 91%);
            background: hsl(0, 0%, 100%);
            color: hsl(215, 25%, 15%);
        }
        .btn-outline:hover {
            background: hsl(220, 14%, 96%);
        }
        .btn-ghost {
            background: transparent;
            color: hsl(215, 25%, 15%);
        }
        .btn-ghost:hover {
            background: hsl(220, 14%, 96%);
        }
        .btn-destructive {
            background: hsl(0, 84%, 60%);
            color: hsl(0, 0%, 98%);
        }
        .btn-secondary {
            background: hsl(220, 14%, 96%);
            color: hsl(215, 25%, 15%);
        }
    </style>
</head>
<body class="bg-background min-h-screen">
    <div id="root">
        <div class="flex items-center justify-center min-h-screen">
            <div class="loading-spinner"></div>
            <p class="ml-4 text-muted-foreground">Loading IV RELIFE Nexus...</p>
        </div>
    </div>

    <script>
        console.log('üöÄ Starting IV RELIFE Nexus application...');
        
        // Check if all dependencies loaded
        if (typeof React === 'undefined') {
            console.error('‚ùå React not loaded');
            document.getElementById('root').innerHTML = '<div class="p-8 text-center"><h2 class="text-red-600">Error: React not loaded</h2></div>';
        }
        
        if (typeof ReactDOM === 'undefined') {
            console.error('‚ùå ReactDOM not loaded');
            document.getElementById('root').innerHTML = '<div class="p-8 text-center"><h2 class="text-red-600">Error: ReactDOM not loaded</h2></div>';
        }
        
        if (typeof ReactRouterDOM === 'undefined') {
            console.error('‚ùå React Router not loaded');
            document.getElementById('root').innerHTML = '<div class="p-8 text-center"><h2 class="text-red-600">Error: React Router not loaded</h2></div>';
        }
        
        if (typeof window.LucideReact === 'undefined') {
            console.error('‚ùå Lucide React not loaded');
            document.getElementById('root').innerHTML = '<div class="p-8 text-center"><h2 class="text-red-600">Error: Lucide React not loaded</h2></div>';
        }

        console.log('‚úÖ All dependencies loaded successfully');

        const { useState, useEffect, useCallback, useMemo, createElement: h } = React;
        const { createRoot } = ReactDOM;
        const { BrowserRouter, Routes, Route, Link, useNavigate, useParams, Navigate, useLocation } = ReactRouterDOM;
        
        // Import all Lucide React icons
        const {
            Package, Users, ShoppingCart, BarChart3, Building2, User, ClipboardList,
            Shield, UserCog, PackagePlus, Settings, FileText, Truck,
            DollarSign, TrendingUp, TrendingDown, Activity, Database, AlertTriangle,
            CheckCircle, Clock, UserPlus, Eye, Plus, ArrowUpRight, Bell, Search,
            Menu, X, Home, Mail, Phone, MapPin, Edit, Trash2, Calendar, Filter,
            Download, Upload, MoreHorizontal, ChevronRight, ChevronDown, Star,
            CreditCard, Tag, Zap
        } = window.LucideReact;

        // Simplified utility function without clsx dependency
        function cn(...classes) {
            return classes.filter(Boolean).join(' ');
        }

        // Mock Data (from the real app)
        const mockUser = {
            id: 'usr-1',
            email: 'admin@ivrelife.com',
            role: 'owner',
            name: 'Sarah Chen',
            avatar: 'https://images.unsplash.com/photo-1494790108755-2616b612b47c?w=150&h=150&fit=crop&crop=face'
        };

        const mockUsers = [
            {
                id: 'usr-1',
                email: 'admin@ivrelife.com',
                role: 'owner',
                name: 'Sarah Chen',
                avatar: 'https://images.unsplash.com/photo-1494790108755-2616b612b47c?w=150&h=150&fit=crop&crop=face'
            },
            {
                id: 'usr-2',
                email: 'manager@ivrelife.com',
                role: 'backoffice',
                name: 'Michael Rodriguez',
                avatar: 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face'
            }
        ];

        const mockCustomers = [
            {
                id: 'cust-1',
                retailer_id: 'ret-1',
                name: 'John Smith',
                email: 'john.smith@email.com',
                phone: '(555) 666-7777',
                default_address: {
                    street: '123 Customer Lane',
                    city: 'San Francisco',
                    state: 'CA',
                    zip: '94103',
                    country: 'USA'
                },
                notes: 'VIP customer with excellent payment history',
                created_at: '2024-03-01T00:00:00Z',
                updated_at: '2024-03-01T00:00:00Z'
            },
            {
                id: 'cust-2',
                retailer_id: 'ret-1',
                name: 'Emily Johnson',
                email: 'emily.johnson@email.com',
                phone: '(555) 888-9999',
                default_address: {
                    street: '456 Buyer Street',
                    city: 'Oakland',
                    state: 'CA',
                    zip: '94607',
                    country: 'USA'
                },
                notes: 'Regular customer, prefers email communication',
                created_at: '2024-03-05T00:00:00Z',
                updated_at: '2024-03-05T00:00:00Z'
            }
        ];

        const mockOrders = [
            {
                id: 'ord-1',
                retailer_id: 'ret-1',
                location_id: 'loc-1',
                customer_id: 'cust-1',
                created_by: 'usr-1',
                status: 'processing',
                total_amount: 3499.98,
                subtotal_amount: 3499.98,
                tax_amount: 0,
                requires_ltl: false,
                created_at: '2024-03-15T10:30:00Z',
                updated_at: '2024-03-15T11:00:00Z'
            },
            {
                id: 'ord-2',
                retailer_id: 'ret-1',
                location_id: 'loc-2',
                customer_id: 'cust-2',
                created_by: 'usr-1',
                status: 'delivered',
                total_amount: 999.99,
                subtotal_amount: 999.99,
                tax_amount: 0,
                requires_ltl: false,
                created_at: '2024-03-10T14:15:00Z',
                updated_at: '2024-03-11T09:00:00Z'
            }
        ];

        const sampleProducts = [
            {
                id: 'boss-plus',
                title: 'Boss Plus Massage Chair',
                price: 2999.99,
                available: true,
                description: 'Premium massage chair with advanced features',
                category: 'Massage Chairs'
            },
            {
                id: 'arya',
                title: 'Arya Wellness Pod',
                price: 1499.99,
                available: false,
                description: 'Compact wellness and recovery pod',
                category: 'Wellness Equipment'
            }
        ];

        // Simplified UI Components without CVA
        function Button({ className = '', variant = 'default', size = 'default', children, ...props }) {
            const baseClasses = 'inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50';
            
            const variantClasses = {
                default: 'btn-default',
                outline: 'btn-outline',
                ghost: 'btn-ghost',
                destructive: 'btn-destructive',
                secondary: 'btn-secondary'
            };
            
            const sizeClasses = {
                default: 'h-10 px-4 py-2',
                sm: 'h-9 px-3',
                lg: 'h-11 px-8',
                icon: 'h-10 w-10'
            };
            
            return h('button', {
                className: cn(baseClasses, variantClasses[variant], sizeClasses[size], className),
                ...props
            }, children);
        }

        function Card({ className = '', children, ...props }) {
            return h('div', {
                className: cn("rounded-lg border bg-card text-card-foreground shadow-sm", className),
                ...props
            }, children);
        }

        function CardHeader({ className = '', children, ...props }) {
            return h('div', {
                className: cn("flex flex-col space-y-1.5 p-6", className),
                ...props
            }, children);
        }

        function CardTitle({ className = '', children, ...props }) {
            return h('h3', {
                className: cn("text-2xl font-semibold leading-none tracking-tight", className),
                ...props
            }, children);
        }

        function CardContent({ className = '', children, ...props }) {
            return h('div', {
                className: cn("p-6 pt-0", className),
                ...props
            }, children);
        }

        function Badge({ className = '', variant = 'default', children, ...props }) {
            const variants = {
                default: "bg-primary text-primary-foreground hover:bg-primary/80",
                secondary: "bg-secondary text-secondary-foreground hover:bg-secondary/80",
                destructive: "bg-destructive text-destructive-foreground hover:bg-destructive/80",
                outline: "text-foreground border border-input",
            };
            
            return h('div', {
                className: cn(
                    "inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",
                    variants[variant],
                    className
                ),
                ...props
            }, children);
        }

        // Sidebar Component (from the real app)
        function Sidebar({ className = '' }) {
            const location = useLocation();
            const user = mockUser;

            const navigation = [
                {
                    name: 'Dashboard',
                    href: '/dashboard',
                    icon: BarChart3,
                    roles: ['owner', 'backoffice', 'retailer', 'location']
                },
                {
                    name: 'Orders',
                    href: '/orders',
                    icon: ShoppingCart,
                    roles: ['owner', 'backoffice', 'retailer', 'location']
                },
                {
                    name: 'Products',
                    href: '/products',
                    icon: Package,
                    roles: ['owner', 'backoffice', 'retailer']
                },
                {
                    name: 'Customers',
                    href: '/customers',
                    icon: Users,
                    roles: ['owner', 'backoffice', 'retailer', 'location']
                },
                {
                    name: 'Shipping',
                    href: '/shipping',
                    icon: Truck,
                    roles: ['owner', 'backoffice', 'retailer', 'location']
                },
                {
                    name: 'Claims & Repairs',
                    href: '/claims',
                    icon: ClipboardList,
                    roles: ['owner', 'backoffice', 'retailer', 'location']
                },
                {
                    name: 'Settings',
                    href: '/settings',
                    icon: Settings,
                    roles: ['owner', 'backoffice', 'retailer']
                }
            ];

            const adminNavigation = [
                {
                    name: 'Admin Dashboard',
                    href: '/admin',
                    icon: Shield,
                    roles: ['owner', 'backoffice']
                },
                {
                    name: 'User Management',
                    href: '/admin/users',
                    icon: UserCog,
                    roles: ['owner', 'backoffice']
                },
                {
                    name: 'Product Admin',
                    href: '/admin/products',
                    icon: PackagePlus,
                    roles: ['owner', 'backoffice']
                }
            ];

            const filteredNavigation = navigation.filter(item => 
                item.roles.includes(user.role)
            );

            const filteredAdminNavigation = adminNavigation.filter(item => 
                item.roles.includes(user.role)
            );

            return h('div', {
                className: cn(
                    "flex h-full w-72 flex-col bg-card border-r border-border shadow-navbar",
                    className
                )
            },
                // Header
                h('div', { className: 'flex items-center gap-3 px-6 py-6 border-b border-border' },
                    h('div', { className: 'w-10 h-10 gradient-primary rounded-lg flex items-center justify-center' },
                        h(Package, { className: 'w-6 h-6 text-white' })
                    ),
                    h('div', null,
                        h('h1', { className: 'text-xl font-bold text-foreground' }, 'IV RELIFE'),
                        h('p', { className: 'text-sm text-muted-foreground' }, 'Internal System')
                    )
                ),
                
                // Navigation
                h('nav', { className: 'flex-1 px-4 py-6 space-y-4 overflow-y-auto' },
                    // Main Navigation
                    h('div', { className: 'space-y-2' },
                        filteredNavigation.map(item => {
                            const isActive = location.pathname === item.href || 
                                (item.href !== '/dashboard' && location.pathname.startsWith(item.href) && !location.pathname.startsWith('/admin'));
                            
                            return h(Link, {
                                key: item.name,
                                to: item.href
                            },
                                h(Button, {
                                    variant: isActive ? "default" : "ghost",
                                    size: "sm",
                                    className: cn(
                                        "w-full justify-start gap-3 h-11 transition-smooth",
                                        isActive && "shadow-elegant"
                                    )
                                },
                                    h(item.icon, { className: 'w-5 h-5' }),
                                    item.name
                                )
                            );
                        })
                    ),
                    
                    // Admin Navigation
                    filteredAdminNavigation.length > 0 && h('div', { className: 'space-y-2' },
                        h('div', { className: 'px-3 py-2' },
                            h('h3', { className: 'text-xs font-semibold text-muted-foreground uppercase tracking-wider' },
                                'Administration'
                            )
                        ),
                        filteredAdminNavigation.map(item => {
                            const isActive = location.pathname === item.href || 
                                (item.href !== '/admin' && location.pathname.startsWith(item.href));
                            
                            return h(Link, {
                                key: item.name,
                                to: item.href
                            },
                                h(Button, {
                                    variant: isActive ? "default" : "ghost",
                                    size: "sm",
                                    className: cn(
                                        "w-full justify-start gap-3 h-11 transition-smooth",
                                        isActive && "shadow-elegant"
                                    )
                                },
                                    h(item.icon, { className: 'w-5 h-5' }),
                                    item.name
                                )
                            );
                        })
                    )
                ),
                
                // User Profile
                h('div', { className: 'p-4 border-t border-border' },
                    h('div', { className: 'flex items-center gap-3 p-3 rounded-lg bg-muted/50' },
                        h('img', { 
                            src: user.avatar,
                            className: 'w-10 h-10 rounded-full',
                            alt: user.name
                        }),
                        h('div', { className: 'flex-1 min-w-0' },
                            h('p', { className: 'text-sm font-medium text-foreground truncate' }, user.name),
                            h('p', { className: 'text-xs text-muted-foreground capitalize' }, user.role)
                        )
                    )
                )
            );
        }

        // Header Component (simplified)
        function Header() {
            return h('header', { 
                className: 'h-16 bg-card border-b border-border px-6 flex items-center justify-between shadow-navbar'
            },
                h('div', { className: 'flex items-center gap-4' },
                    h('div', { className: 'relative' },
                        h(Search, { className: 'absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4' }),
                        h('input', { 
                            placeholder: 'Search orders, customers...',
                            className: 'w-80 h-10 pl-10 pr-4 border border-input rounded-md bg-background'
                        })
                    )
                ),
                h('div', { className: 'flex items-center gap-4' },
                    h(Button, { variant: 'ghost', size: 'sm' },
                        h(Bell, { className: 'w-5 h-5' })
                    ),
                    h('div', { className: 'text-right' },
                        h('p', { className: 'text-sm font-medium' }, 'Welcome back!'),
                        h('p', { className: 'text-xs text-muted-foreground' },
                            new Date().toLocaleDateString('en-US', { 
                                weekday: 'long', 
                                year: 'numeric', 
                                month: 'long', 
                                day: 'numeric' 
                            })
                        )
                    )
                )
            );
        }

        // Dashboard Layout
        function DashboardLayout({ children }) {
            return h('div', { className: 'min-h-screen bg-background' },
                h('div', { className: 'flex h-screen' },
                    h(Sidebar),
                    h('div', { className: 'flex-1 flex flex-col overflow-hidden' },
                        h(Header),
                        h('main', { className: 'flex-1 overflow-y-auto p-6' },
                            children
                        )
                    )
                )
            );
        }

        // Real Dashboard Component (EXACTLY from the app)
        function Dashboard() {
            const stats = [
                {
                    title: 'Total Orders',
                    value: '2,847',
                    change: '+12%',
                    trend: 'up',
                    icon: ShoppingCart,
                    color: 'text-blue-600'
                },
                {
                    title: 'Revenue',
                    value: '$68,429',
                    change: '+8.2%',
                    trend: 'up',
                    icon: DollarSign,
                    color: 'text-green-600'
                },
                {
                    title: 'Active Customers',
                    value: '1,249',
                    change: '+4.1%',
                    trend: 'up',
                    icon: Users,
                    color: 'text-purple-600'
                },
                {
                    title: 'Products',
                    value: '847',
                    change: '+2.3%',
                    trend: 'up',
                    icon: Package,
                    color: 'text-orange-600'
                }
            ];

            const recentOrders = mockOrders.slice(0, 5);
            
            const getCustomerName = (customerId) => {
                const customer = mockCustomers.find(c => c.id === customerId);
                return customer ? customer.name : 'Unknown Customer';
            };

            return h('div', { className: 'space-y-8 animate-fade-in' },
                // Header
                h('div', { className: 'flex items-center justify-between' },
                    h('div', null,
                        h('h1', { className: 'text-3xl font-bold text-foreground' }, 'Dashboard'),
                        h('p', { className: 'text-muted-foreground mt-1' },
                            'Monitor your IV RELIFE operations'
                        )
                    ),
                    h(Link, { to: '/orders/new' },
                        h(Button, { className: 'shadow-elegant' },
                            h(Plus, { className: 'w-4 h-4 mr-2' }),
                            'New Order'
                        )
                    )
                ),

                // Stats Grid
                h('div', { className: 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6' },
                    stats.map((stat) => 
                        h(Card, { key: stat.title, className: 'shadow-card hover:shadow-elegant transition-smooth' },
                            h(CardHeader, { className: 'flex flex-row items-center justify-between space-y-0 pb-2' },
                                h(CardTitle, { className: 'text-sm font-medium text-muted-foreground' }, stat.title),
                                h(stat.icon, { className: `w-5 h-5 ${stat.color}` })
                            ),
                            h(CardContent, null,
                                h('div', { className: 'text-2xl font-bold text-foreground' }, stat.value),
                                h('div', { className: 'flex items-center text-xs text-muted-foreground mt-1' },
                                    h(TrendingUp, { className: 'w-3 h-3 mr-1 text-green-600' }),
                                    h('span', { className: 'text-green-600 font-medium' }, stat.change),
                                    h('span', { className: 'ml-1' }, 'from last month')
                                )
                            )
                        )
                    )
                ),

                // Recent Orders & Quick Actions
                h('div', { className: 'grid grid-cols-1 lg:grid-cols-2 gap-6' },
                    h(Card, { className: 'shadow-card' },
                        h(CardHeader, { className: 'flex flex-row items-center justify-between' },
                            h(CardTitle, { className: 'text-lg font-semibold' }, 'Recent Orders'),
                            h(Link, { to: '/orders' },
                                h(Button, { variant: 'ghost', size: 'sm' },
                                    'View all',
                                    h(ArrowUpRight, { className: 'w-4 h-4 ml-1' })
                                )
                            )
                        ),
                        h(CardContent, { className: 'space-y-4' },
                            recentOrders.map((order) => 
                                h('div', { 
                                    key: order.id, 
                                    className: 'flex items-center justify-between p-3 bg-muted/30 rounded-lg'
                                },
                                    h('div', { className: 'flex-1' },
                                        h('p', { className: 'font-medium text-foreground' }, getCustomerName(order.customer_id)),
                                        h('p', { className: 'text-sm text-muted-foreground' }, 
                                            `Order #${order.id} ‚Ä¢ $${order.total_amount.toLocaleString()}`
                                        )
                                    ),
                                    h(Badge, { 
                                        variant: order.status === 'delivered' ? 'default' :
                                                order.status === 'shipped' ? 'secondary' :
                                                order.status === 'processing' ? 'outline' : 'destructive',
                                        className: 'capitalize'
                                    }, order.status)
                                )
                            )
                        )
                    ),

                    h(Card, { className: 'shadow-card' },
                        h(CardHeader, null,
                            h(CardTitle, { className: 'text-lg font-semibold' }, 'Quick Actions')
                        ),
                        h(CardContent, { className: 'space-y-3' },
                            h(Link, { to: '/orders/new' },
                                h(Button, { variant: 'outline', className: 'w-full justify-start h-12' },
                                    h(Plus, { className: 'w-4 h-4 mr-3' }),
                                    'Create New Order'
                                )
                            ),
                            h(Link, { to: '/customers' },
                                h(Button, { variant: 'outline', className: 'w-full justify-start h-12' },
                                    h(Users, { className: 'w-4 h-4 mr-3' }),
                                    'Manage Customers'
                                )
                            ),
                            h(Link, { to: '/products' },
                                h(Button, { variant: 'outline', className: 'w-full justify-start h-12' },
                                    h(Package, { className: 'w-4 h-4 mr-3' }),
                                    'View Products'
                                )
                            ),
                            h(Link, { to: '/shipping' },
                                h(Button, { variant: 'outline', className: 'w-full justify-start h-12' },
                                    h(TrendingUp, { className: 'w-4 h-4 mr-3' }),
                                    'Track Shipments'
                                )
                            )
                        )
                    )
                )
            );
        }

        // Real Admin Dashboard Component (from the app)
        function AdminDashboard() {
            const stats = {
                totalUsers: mockUsers.length,
                totalProducts: sampleProducts.length,
                totalOrders: mockOrders.length,
                totalCustomers: mockCustomers.length,
                totalRevenue: mockOrders.reduce((sum, order) => sum + order.total_amount, 0),
                pendingOrders: mockOrders.filter(o => o.status === 'pending').length,
                lowStockProducts: sampleProducts.filter(p => !p.available).length,
                activeUsers: mockUsers.filter(u => ['owner', 'backoffice'].includes(u.role)).length
            };

            return h('div', { className: 'space-y-6 animate-fade-in' },
                // Header
                h('div', { className: 'flex items-center justify-between' },
                    h('div', null,
                        h('h1', { className: 'text-3xl font-bold text-foreground' }, 'Admin Dashboard'),
                        h('p', { className: 'text-muted-foreground mt-1' },
                            'Complete system administration and management'
                        )
                    ),
                    h('div', { className: 'flex items-center gap-2' },
                        h(Button, { variant: 'outline', size: 'sm' },
                            h(FileText, { className: 'w-4 h-4 mr-2' }),
                            'View Audit Logs'
                        ),
                        h(Button, { variant: 'outline', size: 'sm' },
                            h(Settings, { className: 'w-4 h-4 mr-2' }),
                            'System Settings'
                        )
                    )
                ),

                // Statistics Overview
                h('div', { className: 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6' },
                    h(Card, null,
                        h(CardContent, { className: 'p-6' },
                            h('div', { className: 'flex items-center justify-between' },
                                h('div', null,
                                    h('p', { className: 'text-sm font-medium text-muted-foreground' }, 'Total Users'),
                                    h('p', { className: 'text-3xl font-bold' }, stats.totalUsers),
                                    h('p', { className: 'text-xs text-muted-foreground' },
                                        `${stats.activeUsers} active today`
                                    )
                                ),
                                h(Users, { className: 'w-8 h-8 text-blue-500' })
                            )
                        )
                    ),

                    h(Card, null,
                        h(CardContent, { className: 'p-6' },
                            h('div', { className: 'flex items-center justify-between' },
                                h('div', null,
                                    h('p', { className: 'text-sm font-medium text-muted-foreground' }, 'Total Products'),
                                    h('p', { className: 'text-3xl font-bold' }, stats.totalProducts),
                                    h('p', { className: 'text-xs text-muted-foreground' },
                                        `${stats.lowStockProducts} out of stock`
                                    )
                                ),
                                h(Package, { className: 'w-8 h-8 text-green-500' })
                            )
                        )
                    ),

                    h(Card, null,
                        h(CardContent, { className: 'p-6' },
                            h('div', { className: 'flex items-center justify-between' },
                                h('div', null,
                                    h('p', { className: 'text-sm font-medium text-muted-foreground' }, 'Total Orders'),
                                    h('p', { className: 'text-3xl font-bold' }, stats.totalOrders),
                                    h('p', { className: 'text-xs text-muted-foreground' },
                                        `${stats.pendingOrders} pending`
                                    )
                                ),
                                h(ShoppingCart, { className: 'w-8 h-8 text-purple-500' })
                            )
                        )
                    ),

                    h(Card, null,
                        h(CardContent, { className: 'p-6' },
                            h('div', { className: 'flex items-center justify-between' },
                                h('div', null,
                                    h('p', { className: 'text-sm font-medium text-muted-foreground' }, 'Total Revenue'),
                                    h('p', { className: 'text-3xl font-bold' }, `$${stats.totalRevenue.toLocaleString()}`),
                                    h('p', { className: 'text-xs text-green-600 flex items-center' },
                                        h(TrendingUp, { className: 'w-3 h-3 mr-1' }),
                                        '+12.5% from last month'
                                    )
                                ),
                                h(DollarSign, { className: 'w-8 h-8 text-yellow-500' })
                            )
                        )
                    )
                ),

                // System Status
                h(Card, null,
                    h(CardHeader, null,
                        h(CardTitle, { className: 'flex items-center gap-2' },
                            h(Activity, { className: 'w-5 h-5' }),
                            'System Status'
                        )
                    ),
                    h(CardContent, { className: 'space-y-4' },
                        h('div', { className: 'flex items-center justify-between p-3 rounded-lg bg-green-50' },
                            h('div', { className: 'flex items-center gap-3' },
                                h(CheckCircle, { className: 'w-5 h-5 text-green-500' }),
                                h('div', null,
                                    h('p', { className: 'font-medium text-green-700' }, 'All Systems Operational'),
                                    h('p', { className: 'text-sm text-green-600' }, 'Database, API, and Security running smoothly')
                                )
                            ),
                            h(Badge, { variant: 'outline', className: 'text-green-700 border-green-200' }, 'Healthy')
                        ),

                        stats.lowStockProducts > 0 && h('div', { className: 'flex items-center justify-between p-3 rounded-lg bg-red-50' },
                            h('div', { className: 'flex items-center gap-3' },
                                h(Package, { className: 'w-5 h-5 text-red-500' }),
                                h('div', null,
                                    h('p', { className: 'font-medium text-red-700' },
                                        `${stats.lowStockProducts} products out of stock`
                                    ),
                                    h('p', { className: 'text-sm text-red-600' },
                                        'Immediate attention required'
                                    )
                                )
                            ),
                            h(Button, { size: 'sm', variant: 'outline' }, 'View Products')
                        )
                    )
                )
            );
        }

        // Simple placeholder pages
        function Orders() {
            return h(DashboardLayout, null,
                h('div', { className: 'space-y-6' },
                    h('h1', { className: 'text-3xl font-bold' }, 'Orders'),
                    h(Card, { className: 'p-8 text-center' },
                        h('p', { className: 'text-muted-foreground' }, 'Orders management functionality available in the full application...')
                    )
                )
            );
        }

        function NotFound() {
            return h('div', { className: 'min-h-screen flex items-center justify-center bg-background' },
                h('div', { className: 'text-center' },
                    h('h1', { className: 'text-4xl font-bold text-foreground mb-4' }, '404'),
                    h('p', { className: 'text-muted-foreground mb-8' }, 'Page not found'),
                    h(Link, { to: '/' },
                        h(Button, null, 'Go Home')
                    )
                )
            );
        }

        // Main App Component
        function App() {
            const [loading, setLoading] = useState(true);

            useEffect(() => {
                console.log('üîÑ App component mounted, starting initialization...');
                const timer = setTimeout(() => {
                    console.log('‚úÖ App initialization complete');
                    setLoading(false);
                }, 500); // Shorter loading time
                
                return () => clearTimeout(timer);
            }, []);

            if (loading) {
                return h('div', { className: 'flex items-center justify-center min-h-screen bg-background' },
                    h('div', { className: 'text-center' },
                        h('div', { className: 'loading-spinner mx-auto mb-4' }),
                        h('p', { className: 'text-muted-foreground' }, 'Loading IV RELIFE Nexus...')
                    )
                );
            }

            return h(BrowserRouter, null,
                h('div', { className: 'min-h-screen bg-background' },
                    h(Routes, null,
                        h(Route, { path: '/', element: h(Navigate, { to: '/dashboard', replace: true }) }),
                        h(Route, { path: '/dashboard', element: h(DashboardLayout, null, h(Dashboard)) }),
                        h(Route, { path: '/admin', element: h(DashboardLayout, null, h(AdminDashboard)) }),
                        h(Route, { path: '/admin/dashboard', element: h(DashboardLayout, null, h(AdminDashboard)) }),
                        h(Route, { path: '/orders', element: h(Orders) }),
                        h(Route, { path: '/customers', element: h(Orders) }),
                        h(Route, { path: '/products', element: h(Orders) }),
                        h(Route, { path: '/shipping', element: h(Orders) }),
                        h(Route, { path: '/claims', element: h(Orders) }),
                        h(Route, { path: '/settings', element: h(Orders) }),
                        h(Route, { path: '*', element: h(NotFound) })
                    )
                )
            );
        }

        // Initialize Application
        try {
            console.log('üéØ Initializing React application...');
            const root = createRoot(document.getElementById('root'));
            console.log('üöÄ Rendering App component...');
            root.render(h(App));
            console.log('üéâ IV RELIFE Nexus application started successfully!');
        } catch (error) {
            console.error('‚ùå Failed to initialize application:', error);
            document.getElementById('root').innerHTML = `
                <div class="p-8 text-center bg-red-50 border border-red-200 rounded-lg m-4">
                    <h2 class="text-xl font-bold text-red-800 mb-2">Application Failed to Start</h2>
                    <p class="text-red-600">${error.message}</p>
                    <button onclick="window.location.reload()" class="mt-4 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700">
                        Reload Page
                    </button>
                </div>
            `;
        }
    </script>
</body>
</html>